/* ---------- CSS RESET ---------- */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; }
    body, h1, h2, h3, h4, p, figure, blockquote, ul, ol { margin: 0; }
    img, svg { display: block; max-width: 100%; }
    button { font: inherit; }
    a {
      color: var(--brand-2);
      text-decoration: underline;
      text-decoration-thickness: 2px;
      text-underline-offset: 3px;
    }

    /* ---------- THEME & TOKENS ---------- */
    :root{
      --bg: #0b1020;
      --bg-elev: #121933;
      --panel: #0f172a;
      --panel-2:#0d1326;
      --text:#e5e7eb;
      --muted:#aab2cf;
      --brand:#ff4d4f;
      --brand-2:#22d3ee;
      --ok:#10b981;
      --warn:#f59e0b;
      --bad:#ef4444;
      --card:#0d1326cc;
      --accent-surface:#0f1a33;
      --border-strong:#1f2a44;
      --border-soft:#243155;
      --accent-border:var(--border-soft);
      --schedule-border:var(--border-strong);
      --schedule-header-bg:#0e162d;
      --schedule-hover-bg:#0e152c;
      --schedule-card-bg:var(--panel-2);
      --shadow: 0 10px 30px rgba(0,0,0,.3);
      --radius:16px;
      --nav-h:64px;
      --space: clamp(12px, .9vw + 10px, 20px);
    }
    /* Catppuccin Latte palette */
    .light{
      --bg:#eff1f5;
      --bg-elev:#e6e9ef;
      --panel:#dce0e8;
      --panel-2:#ccd0da;
      --text:#000;
      --muted:#4b5563;
      --card:#dce0e8cc;
      --accent-surface:#e7ecfb;
      --border-strong:#a3b4d4;
      --border-soft:#c3d1ec;
      --accent-border:var(--border-soft);
      --schedule-border-light:var(--border-strong);
      --schedule-header-bg-light:#e7ecfb;
      --schedule-hover-bg-light:#f3f6ff;
      --schedule-card-bg-light:#f6f8ff;
      --shadow: 0 10px 30px rgba(76,79,105,.08);
    }

    body{
      --cookie-offset: 0px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background:
        radial-gradient(1000px 600px at 10% -10%, #1f2a52 0%, transparent 70%),
        radial-gradient(800px 500px at 90% 0%, #1a2a52 0%, transparent 70%),
        var(--bg);
      color:var(--text);
      line-height:1.5;
      scroll-behavior:smooth;
      transition: background .3s ease, color .3s ease;
    }

    body.light{
      background:
        radial-gradient(1000px 600px at 10% -10%, #e6e9ef 0%, transparent 70%),
        radial-gradient(800px 500px at 90% 0%, #ccd0da 0%, transparent 70%),
        var(--bg);
    }
    body.no-scroll{ overflow:hidden; }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{ animation-duration:.001ms !important; animation-iteration-count:1 !important; transition-duration:.001ms !important; scroll-behavior:auto !important; }
    }

    /* ---------- GLOBAL UTILS ---------- */
    .container{ width:min(1200px, 92vw); margin-inline:auto; }
    .grid{ display:grid; gap: var(--space); }
    .card{
      background:var(--card);
      border:1px solid var(--border-strong);
      border-radius:var(--radius);
      padding: calc(var(--space) * .9);
      backdrop-filter: blur(6px);
      box-shadow: var(--shadow);
    }
    .section{ padding-block: calc(var(--space) * 3.6); scroll-margin-top: calc(var(--nav-h) + 16px); }
    .section-header{ margin-bottom: calc(var(--space) * 1.4); }
    .section-header h2{ font-size: clamp(1.6rem, 1.2rem + 2vw, 2.2rem); }
    .muted{ color:var(--muted); }
    .title{ font-size: clamp(2rem, 1.2rem + 3vw, 3rem); font-weight: 900; line-height:1.05; }
    .btn{ 
      display:inline-flex; align-items:center; gap:.6rem;
      padding:.9rem 1.2rem; border-radius:999px; border:1px solid transparent;
      background: linear-gradient(135deg, var(--brand), #fb7185);
      color:#fff; font-weight:700; letter-spacing:.2px; cursor:pointer;
      box-shadow: var(--shadow);
      transition: transform .15s ease, filter .2s ease, box-shadow .2s ease;
      will-change: transform;
      white-space: nowrap; /* чтобы кнопки не ломались */
      text-decoration: none;
    }
    .btn:hover{ transform: translateY(-1px); filter:brightness(1.05); }
    .btn.secondary{ background: linear-gradient(135deg, #1e293b, #0f172a); color:#e2e8f0; border:1px solid #273248; }
    body.light .btn.secondary{
      background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
      color:#1f2937;
      border:1px solid #cbd5e1;
    }
    .btn.ghost{ background: transparent; color:var(--text); border-color:#334155; }
    body.light .btn.ghost{ border-color:#cbd5e1; }
    .btn[disabled]{ opacity:.6; cursor:not-allowed; }
    .link-btn{
      background:none;
      border:none;
      padding:0;
      color:var(--brand-2);
      font-weight:600;
      cursor:pointer;
      text-decoration:underline;
      text-decoration-thickness:2px;
      text-underline-offset:3px;
    }
    .link-btn:hover{ text-decoration:none; }
    .tag{ display:inline-block; padding:.3rem .7rem; border-radius:999px; font-size:.85rem; background:var(--accent-surface); color:#e5e7eb; border:1px solid var(--accent-border); }
    .consent-wrap{ display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }

    /* utility layouts extracted from inline styles */
    .form-grid{ display:grid; gap:.6rem; margin-top:.6rem; }
    .list-compact{ margin:.5rem 0; display:grid; gap:.25rem; }
    .flex-between{ display:flex; justify-content:space-between; align-items:center; }
    .flex-between-gap{ display:flex; gap:.6rem; align-items:center; justify-content:space-between; }
    .flex-center-gap{ margin-top:.6rem; display:flex; gap:.6rem; justify-content:center; }
    .flex-gap-wrap{ margin-top:.8rem; display:flex; gap:.6rem; flex-wrap:wrap; }
    .flex-gap-sm{ margin-top:.5rem; display:flex; gap:.5rem; }

    /* focus-visible */
    :focus-visible{ outline: 3px solid #60a5fa; outline-offset: 2px; border-radius: 10px; }

    /* ---------- NAVBAR (исправлено) ---------- */
    .nav{
      position: sticky; top:0; z-index:100; height:var(--nav-h);
      backdrop-filter: blur(8px);
      background: linear-gradient(180deg, rgba(13,19,38,.85), rgba(13,19,38,.65));
      border-bottom:1px solid var(--border-strong);
      padding-top: env(safe-area-inset-top);
      padding-right: env(safe-area-inset-right);
      padding-bottom: env(safe-area-inset-bottom);
      padding-left: env(safe-area-inset-left);
    }
    body.light .nav{
      background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.65));
      border-bottom:1px solid var(--border-strong);
    }
    /* grid: logo | nav | cta */
    .nav .wrap{
      display:grid;
      grid-template-columns:auto 1fr auto;
      align-items:center;
      padding-block:.6rem;
      gap:.8rem;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:.6rem;
      font-weight:900;
      letter-spacing:.3px;
      text-decoration:none;
      color:inherit;
    }
    .brand svg{ width:28px; height:28px; }

    .nav-links{
      display:flex; align-items:center; min-width:0; gap:.3rem;
      white-space:nowrap;
    }
    .nav-main{ display:flex; gap:.3rem; margin:0 auto; }
    .nav-main a{
      padding:.45rem .7rem; border-radius:999px;
      font-weight:600; color:var(--text); white-space:nowrap;
      text-decoration:none;
    }
    .nav-main a:hover{ background:var(--panel-2); }
    .nav-main a.active{ background:var(--panel); }
    .nav-main a:focus-visible{ outline:none; }
    .nav-extra{ display:flex; gap:.6rem; align-items:center; }
    .nav-enroll{ padding:.7rem 1.1rem; font-size:.95rem; }
    .nav-extra > *{ flex-shrink:0; white-space:nowrap; }
    .nav-extra a{
      color:var(--text);
      text-decoration:none;
    }

    .nav-cta{ display:flex; gap:.6rem; align-items:center; }
    .menu-btn{ display:none; }
    .menu-btn.open{
      background: var(--panel-2);
      color: var(--brand-2);
      border-color: rgba(255, 255, 255, .15);
    }

    /* раньше уводим в бургер-меню, чтобы никогда не ломалось */
    @media (max-width: 1200px){
      .menu-btn{ display:inline-flex; }
      .nav-links{
        position: fixed; inset: var(--nav-h) 0 0 0; display:none;
        background: var(--panel); border-bottom:1px solid var(--border-strong);
        padding:1rem; gap:.4rem; flex-direction:column; align-items:flex-start;
        overflow-y:auto;
        padding-top: calc(1rem + env(safe-area-inset-top));
        padding-right: calc(1rem + env(safe-area-inset-right));
        padding-bottom: calc(1rem + env(safe-area-inset-bottom));
        padding-left: calc(1rem + env(safe-area-inset-left));
      }
      .nav-links.open{ display:flex; }
      .nav-main{ width:100%; flex-direction:column; }
      .nav-main a{ padding:.8rem 1rem; width:100%; }
      .nav-extra{ width:100%; flex-direction:column; margin-top:.4rem; }
      .nav-extra > *{ width:100%; }
    }

    @media (max-width: 640px){
      .btn,
      .nav-main a,
      .nav-extra > * { white-space: normal; }
      .btn{ font-size:.95rem; padding:.7rem .9rem; }
      .nav-main a{ font-size:.95rem; padding:.6rem .8rem; }
    }

    /* ---------- HERO ---------- */
    .hero{
      position:relative; padding: 80px 0 60px;
      background:
        radial-gradient(1200px 500px at 80% 10%, #102a45cc, transparent 70%),
        conic-gradient(from 210deg at 70% 50%, #0f172a, #12193b, #0b1226, #0f172a);
      overflow:hidden;
      border-bottom:1px solid var(--border-strong);
    }
    .light .hero{
      background:
        radial-gradient(1200px 500px at 80% 10%, rgba(148,163,184,.35), transparent 70%),
        conic-gradient(from 210deg at 70% 50%, #f1f5f9, #e2e8f0, #f8fafc, #f1f5f9);
      border-bottom:1px solid var(--border-soft);
    }
    .hero::after{
      content:""; position:absolute; inset:-10% -10% auto auto; width:60vmax; height:60vmax;
      background: radial-gradient(closest-side, rgba(34,211,238,.25), transparent);
      filter: blur(30px); transform: translate(10%, -35%); animation: float 12s ease-in-out infinite alternate;
      pointer-events:none;
    }
    .light .hero::after{
      background: radial-gradient(closest-side, rgba(34,211,238,.18), transparent);
      filter: blur(26px);
    }
    @keyframes float{ to{ transform: translate(-5%, -45%);} }
    .hero .wrap{ display:grid; gap: var(--space); align-items:center; grid-template-columns: 1.1fr .9fr; }
    @media (max-width: 980px){ .hero .wrap{ grid-template-columns:1fr; } }

    .subtitle{ color:var(--muted); max-width: 60ch; }
    .hero-cta{ display:flex; flex-direction:column; align-items:flex-start; gap:.7rem; margin-top:.6rem; }
    .hero-cta__secondary{ display:flex; flex-wrap:wrap; gap:1rem; font-weight:600; }
    .hero-cta__link{ color:var(--muted); display:inline-flex; align-items:center; gap:.35rem; padding:.2rem 0; transition: color .2s ease; }
    .hero-cta__link:hover{ color:var(--text); }
    body.light .hero-cta__link{ color:#475569; }
    body.light .hero-cta__link:hover{ color:#000; }
    .stats{ display:grid; grid-template-columns: repeat(auto-fit, minmax(90px, 1fr)); gap:.8rem; margin-top:1rem; }
    .stat{ background:var(--panel); border:1px solid var(--panel-2); padding:.9rem; border-radius:var(--radius); text-align:center; }
    .light .stat{ background:var(--panel); border-color: rgba(148,163,184,.6); color:var(--text); }
    .stat b{ font-size:1.4rem; display:block; }

    .hero-art{
      position:relative; aspect-ratio: 4/3; border-radius: 22px; overflow:hidden; border:1px solid #273455;
      background: radial-gradient(120% 80% at 100% 0%, rgba(255,77,79,.25), transparent), linear-gradient(180deg, #0e152c, #0b1120);
      box-shadow: var(--shadow);
    }
    .light .hero-art{
      border-color: rgba(148,163,184,.6);
      background: radial-gradient(120% 80% at 100% 0%, rgba(255,77,79,.2), transparent), linear-gradient(180deg, #f8fafc, #e2e8f0);
    }
    .road{
      position:absolute; inset:auto 0 0 0; height: 42%;
      background:
        linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.5) 100%),
        repeating-linear-gradient(90deg, #121826 0 8px, #0d1426 8px 16px),
        repeating-linear-gradient(0deg, transparent 0 18px, #fef08a 18px 22px, transparent 22px 40px);
      clip-path: polygon(0 100%, 30% 0, 70% 0, 100% 100%);
      background-size: auto, auto, 100% 40px;
      animation: roadMove 1.6s linear infinite;
    }
    .light .road{
      background:
        linear-gradient(180deg, rgba(255,255,255,0) 0%, rgba(148,163,184,.35) 100%),
        repeating-linear-gradient(90deg, #e2e8f0 0 8px, #d9e0ea 8px 16px),
        repeating-linear-gradient(0deg, transparent 0 18px, #facc15 18px 22px, transparent 22px 40px);
    }
    @keyframes roadMove{ to{ background-position: 0 0, 0 0, 0 40px; } }

    .car{ position:absolute; bottom: 18%; left:-20%; width: 42%; filter: drop-shadow(0 8px 20px rgba(0,0,0,.5)); animation: drive 9s cubic-bezier(.2,.8,.2,1) infinite; }
    @keyframes drive{ 0%{ transform: translateX(0) } 55%{ transform: translateX(170%) } 100%{ transform: translateX(170%) } }
    .car-wheel{ animation: spin 1s linear infinite; transform-origin: center; transform-box: fill-box; }
    @keyframes spin{ to{ transform: rotate(360deg); } }
    .glow{ position:absolute; width:120px; height:120px; border-radius:50%; background: radial-gradient(circle, rgba(255,77,79,.7), rgba(255,77,79,0)); filter: blur(10px); right:8%; bottom: 18%; animation: pulse 3s ease-in-out infinite; }
    .light .glow{ background: radial-gradient(circle, rgba(255,77,79,.4), rgba(255,77,79,0)); filter: blur(12px); }
    @keyframes pulse{ 50%{ transform: scale(1.05); opacity:.8 } }

    /* ---------- JOURNEY ---------- */
    .journey-grid{ grid-template-columns: repeat(4, minmax(0, 1fr)); }
    .journey-step{ display:grid; grid-template-columns: auto 1fr; gap:.9rem; align-items:flex-start; }
    .journey-icon{
      width:56px; height:56px; border-radius:16px; display:grid; place-items:center;
      font-size:1.8rem; background:#0f1a33; border:1px solid var(--border-soft); align-self:start;
    }
    body.light .journey-icon{ background:#e0e7ff; border-color:var(--border-soft); }
    @media (max-width: 980px){ .journey-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); } }
    @media (max-width: 640px){
      .journey-grid{ grid-template-columns: 1fr; }
      .journey-step{ grid-template-columns: 1fr; }
      .journey-icon{ margin-bottom:.2rem; }
    }

    /* ---------- FEATURES / COURSES / PRICING / etc ---------- */
    .features{ grid-template-columns: repeat(4,1fr); }
    @media (max-width: 980px){ .features{ grid-template-columns: repeat(2,1fr); } }
    @media (max-width: 640px){ .features{ grid-template-columns: 1fr; } }
    .feature{ display:grid; grid-template-columns: 48px 1fr; gap:.8rem; align-items:start; }
    .feature .ico{ width:48px; height:48px; border-radius:12px; display:grid; place-items:center; background:var(--accent-surface); border:1px solid var(--accent-border); }

    .courses{ grid-template-columns: repeat(3,1fr); }
    @media (max-width: 980px){ .courses{ grid-template-columns: 1fr; } }
    .course .title{ font-size:1.3rem; }
    .badge{ background:var(--accent-surface); border:1px solid var(--accent-border); padding:.25rem .6rem; border-radius:999px; font-size:.8rem; color:#d6e2ff; }

    /* ---------- SCHEDULE ---------- */
    .filterbar{ display:flex; gap:.5rem; flex-wrap:wrap; align-items:flex-end; }
    .filterbar label{ display:flex; flex-direction:column; gap:.25rem; font-size:.85rem; color:var(--muted); }
    .filterbar label span{ font-weight:600; }
    .form-field{ display:flex; flex-direction:column; gap:.35rem; }
    .form-label{ font-size:.95rem; font-weight:600; letter-spacing:.1px; }
    .form-checkbox{ display:flex; gap:.5rem; align-items:center; font-size:.95rem; }
    .form-checkbox input[type="checkbox"]{ width:1.1rem; height:1.1rem; flex-shrink:0; }
    .form-checkbox label{ cursor:pointer; }
    .select, .input{ background:var(--panel); border:1px solid var(--border-strong); color:var(--text); border-radius:10px; padding:.6rem .7rem; outline:none; }
    .input.error, .select.error { border-color: var(--bad); }
    .schedule-table{ width:100%; border-collapse: collapse; overflow:hidden; border-radius: var(--radius); border:1px solid var(--schedule-border); }
    .schedule-table th,
    .schedule-table td{ padding:.8rem .9rem; border-bottom:1px solid var(--schedule-border); text-align:left; }
    .schedule-table thead{ background:var(--schedule-header-bg); }
    .schedule-table thead th{ color:var(--text); }
    .schedule-table tbody tr:hover{ background:var(--schedule-hover-bg); }
    body.light .schedule-table thead{ background:var(--schedule-header-bg-light, var(--schedule-header-bg)); }
    body.light .schedule-table tbody tr:hover{ background:var(--schedule-hover-bg-light, var(--schedule-hover-bg)); }
    body.light .schedule-table{ border-color:var(--schedule-border-light, var(--schedule-border)); }
    body.light .schedule-table th,
    body.light .schedule-table td{ border-bottom-color:var(--schedule-border-light, var(--schedule-border)); }

    /* ---------- PRICING ---------- */
    .pricing{ grid-template-columns: repeat(3,1fr); }
    @media (max-width: 980px){ .pricing{ grid-template-columns: 1fr; } }
    .price{ text-align:center; }
    .price .num{ font-size:2rem; font-weight:900; }
    .toggle{ display:inline-flex; align-items:center; gap:.5rem; padding:.3rem; border:1px solid var(--panel-2); border-radius:999px; background:var(--panel); }
    .toggle button{ padding:.4rem .8rem; border-radius:999px; border:none; background:transparent; color:var(--muted); cursor:pointer; }
    .toggle button.active{ background:var(--panel-2); color:var(--text); }
    .light .toggle{ border-color: rgba(148,163,184,.6); background: var(--panel); }
    .light .toggle button.active{ background:var(--panel-2); color:var(--text); box-shadow: 0 0 0 1px rgba(148,163,184,.3) inset; }

    /* ---------- INSTRUCTORS ---------- */
    .instructors{ grid-template-columns: repeat(3,1fr); }
    @media (max-width: 980px){ .instructors{ grid-template-columns:1fr; } }
    .person{ display:grid; grid-template-columns: 96px 1fr; gap:.8rem; align-items:center; }
    .avatar{ width:96px; height:96px; border-radius:50%; background: linear-gradient(145deg,#0b1226,#15224a); border:1px solid #22345c; display:grid; place-items:center; font-weight:900; }
    body.light .avatar{
      background: linear-gradient(145deg,#f4f6fb,#dce2f5);
      border:1px solid #b7c4de;
      color:#1e293b;
    }

    /* ---------- FLEET ---------- */
    .fleet{ display:grid; grid-template-columns:repeat(3,1fr); gap:1rem; }
    @media (max-width:980px){ .fleet{ grid-template-columns:1fr; } }

    /* ---------- REVIEWS ---------- */
    .reviews{ position:relative; overflow:hidden; max-width: 760px; margin: 0 auto; }
    .track{ display:flex; gap:1rem; transition: transform .5s ease; }
    .review{ min-width:100%; display:flex; justify-content:center; }
    .review-body{ width:100%; max-width: 540px; margin: 0 auto; padding: calc(var(--space) * 1.5) calc(var(--space) * 1.8); text-align:center; }
    .dots{ display:flex; justify-content:center; gap:.4rem; margin-top:.8rem; }
    .dot{
      width:10px;
      height:10px;
      border-radius:50%;
      background:#9fb6ff;
      border:1px solid rgba(255,255,255,.6);
      transition: background .2s ease, border-color .2s ease, transform .2s ease;
    }
    .dot.active{
      background: var(--brand-2);
      border-color: var(--brand-2);
      transform: scale(1.1);
    }
    body.light .tag{ background:var(--accent-surface); border-color:var(--accent-border); color:#1f2937; }
    body.light .feature .ico{ background:var(--accent-surface); border-color:var(--accent-border); color:#1f2937; }
    body.light .badge{ background:var(--accent-surface); border-color:var(--accent-border); color:#1e293b; }
    body.light .dot{
      background:#3f4f88;
      border-color: rgba(15,23,42,.2);
    }
    body.light .dot.active{
      background: var(--brand);
      border-color: var(--brand);
    }

    /* ---------- FAQ ---------- */
    .faq-item{ border:1px solid var(--border-soft); border-radius:12px; overflow:hidden; background:var(--panel); }
    .faq-q{ display:flex; justify-content:space-between; align-items:center; padding:.9rem 1rem; cursor:pointer; }
    .faq-a{ padding: .6rem 1rem 1rem; transition: height .3s ease; }
    .faq-item.js-collapsible .faq-a{ padding:0 1rem; height:0; overflow:hidden; }
    .faq-item.js-collapsible.open .faq-a{ padding: .6rem 1rem 1rem; }

    /* ---------- CONTACTS ---------- */
    .contacts{ display:grid; grid-template-columns: 1.1fr .9fr; gap: var(--space); }
    @media (max-width: 980px){ .contacts{ grid-template-columns:1fr; } }
    .map{
      padding:0;
      background:none;
      border-radius: var(--radius);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      gap:0;
    }
    .map .map-media{
      position:relative;
      width:100%;
      padding-top:56.25%;
      overflow:hidden;
    }
    .map iframe,
    .map img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      border:0;
    }
    .map .pin{
      position:absolute;
      width:14px;
      height:14px;
      background:var(--brand);
      border-radius:50%;
      box-shadow:0 0 0 6px rgba(255,77,79,.15);
      animation: ping 1.6s infinite;
      transform:translate(-50%,-50%);
      pointer-events:none;
    }
    .map .map-info{
      padding:calc(var(--space) * .9);
      display:grid;
      gap:.4rem;
      text-align:center;
      justify-items:center;
      background:var(--card);
      border-top:1px solid rgba(31,42,68,.6);
    }
    body.light .map .map-info{ border-top:1px solid rgba(148,163,184,.5); }
    @media (max-width: 640px){
      .map .map-media{ padding-top:70%; }
    }
    @keyframes ping{ 0%{ transform: scale(.9); opacity:.8 } 70%{ transform: scale(1.4); opacity:.1 } 100%{ transform: scale(.9); opacity:.8 } }

    /* ---------- FOOTER ---------- */
    footer{ padding: 40px 0; border-top:1px solid var(--border-strong); background: linear-gradient(180deg, rgba(15,23,42,.6), rgba(11,17,32,.9)); }
    .light footer{ border-top:1px solid rgba(148,163,184,.6); background: linear-gradient(180deg, rgba(248,250,252,.8), rgba(226,232,240,.95)); }

    /* ---------- MODALS / TOAST ---------- */
    :root{ --overlay:#0f172a; --overlay-border:#22345c; }
    .light{ --overlay:#ffffff; --overlay-border:#d3dae5; }
    .modal-backdrop{ position:fixed; inset:0; background:rgba(3,7,18,.6); display:none; align-items:center; justify-content:center; z-index:120; padding-top: env(safe-area-inset-top); padding-right: env(safe-area-inset-right); padding-bottom: env(safe-area-inset-bottom); padding-left: env(safe-area-inset-left); }
    .modal{ width:min(560px, 92vw); background:var(--overlay); border:1px solid var(--overlay-border); border-radius:16px; padding:1rem; box-shadow: var(--shadow); }
    .modal-head{ display:flex; justify-content:space-between; align-items:center; }
    .x{ background:transparent; border:none; color:var(--muted); font-size:1.4rem; cursor:pointer; }
    .toast{ position: fixed; right:16px; bottom:16px; background:var(--overlay); color:#e5e7eb; border:1px solid var(--overlay-border); padding:.8rem 1rem; border-radius:12px; box-shadow: var(--shadow); display:none; z-index:200; padding-top: env(safe-area-inset-top); padding-right: env(safe-area-inset-right); padding-bottom: env(safe-area-inset-bottom); padding-left: env(safe-area-inset-left); }

    /* ---------- REVEAL on scroll ---------- */
    .reveal{ opacity:0; transform: translateY(16px); transition: opacity .6s ease, transform .6s ease; }
    .reveal.show{ opacity:1; transform: translateY(0); }
    [data-reveal-delay="1"]{ transition-delay: .1s; }
    [data-reveal-delay="2"]{ transition-delay: .2s; }
    [data-reveal-delay="3"]{ transition-delay: .3s; }

    /* ---------- BACK TO TOP ---------- */
    .to-top{ position: fixed; right:16px; bottom: calc(92px + var(--cookie-offset, 0px)); display:none; padding-top: env(safe-area-inset-top); padding-right: env(safe-area-inset-right); padding-bottom: env(safe-area-inset-bottom); padding-left: env(safe-area-inset-left); }

    /* ---------- COOKIE BAR ---------- */
    .cookie{ position: fixed; inset: auto 16px 16px 16px; background: var(--overlay); border:1px solid var(--overlay-border); border-radius:12px; padding:.9rem; display:none; z-index:110; padding-top: env(safe-area-inset-top); padding-right: env(safe-area-inset-right); padding-bottom: env(safe-area-inset-bottom); padding-left: env(safe-area-inset-left); }
    body.light .modal,
    body.light .toast,
    body.light .cookie{ background:var(--overlay); border-color:var(--overlay-border); color:#1f2937; box-shadow: 0 20px 40px rgba(15,23,42,.12); }

    /* ---------- SCROLL PROGRESS ---------- */
    .scroll-progress{ position: fixed; inset:0 auto auto 0; height:4px; width:0%; z-index:140; background: linear-gradient(90deg, var(--brand), #fb7185, var(--brand-2)); box-shadow: 0 0 10px rgba(255,77,79,.6); padding-top: env(safe-area-inset-top); padding-right: env(safe-area-inset-right); padding-bottom: env(safe-area-inset-bottom); padding-left: env(safe-area-inset-left); }

    /* ---------- FLOATING CTA (mobile) ---------- */
    .floating-cta{
      position: fixed; left:50%; transform: translateX(-50%);
      bottom: calc(16px + var(--cookie-offset, 0px)); z-index: 130; display: none;
      padding-top: env(safe-area-inset-top);
      padding-right: env(safe-area-inset-right);
      padding-bottom: env(safe-area-inset-bottom);
      padding-left: env(safe-area-inset-left);
    }
    @media (max-width: 980px){
      body.has-floating-cta{ padding-bottom: calc(120px + var(--cookie-offset, 0px)); }
      .floating-cta{ display: inline-flex; }
    }

    /* ---------- 3D tilt (hover) ---------- */
    .tilt{ transform-style: preserve-3d; transition: transform .15s ease, box-shadow .2s ease; will-change: transform; }
    .tilt:hover{ box-shadow: 0 20px 40px rgba(0,0,0,.35); }
    body.light .tilt:hover{ box-shadow: 0 20px 40px rgba(148,163,184,.18); }
    
    /* ---------- RESPONSIVE SCHEDULE TABLE ---------- */
    @media (max-width: 600px){
      .schedule-wrap{ overflow:visible !important; }
      .schedule-table{ width:100%; }
      .schedule-table thead{ display:none; }
      .schedule-table tr{ display:block; margin-bottom:var(--space); border:1px solid var(--schedule-border); border-radius:var(--radius); padding:var(--space); background:var(--schedule-card-bg); }
      body.light .schedule-table tr{ border-color:var(--schedule-border-light, var(--schedule-border)); background:var(--schedule-card-bg-light, var(--schedule-card-bg)); }
      .schedule-table td{ display:flex; justify-content:space-between; padding:.3rem 0; }
      .schedule-table td::before{ content: attr(data-label); font-weight:600; margin-right:1rem; }
      .schedule-table td:last-child{ justify-content:center; }
      .schedule-table td:last-child::before{ content:''; margin:0; }
    }

    /* ---------- flex gap fallback ---------- */
    @supports not (gap: 1rem){
      .grid{ margin:-calc(var(--space)/2); }
      .grid > *{ margin: calc(var(--space)/2); }

      .brand > *:not(:last-child){ margin-right:.6rem; }

      .nav-links > *:not(:last-child){ margin-right:.3rem; }
      .nav-cta > *{ margin-right:.6rem; margin-bottom:.6rem; }
      .nav-cta > *:last-child{ margin-right:0; }
      .hero-cta__secondary{ gap:.8rem; }
      .filterbar > *{ margin-right:.5rem; margin-bottom:.5rem; }
      .filterbar > *:last-child{ margin-right:0; }
      .track > *:not(:last-child){ margin-right:1rem; }
      .dots > *:not(:last-child){ margin-right:.4rem; }

      @media (max-width: 1200px){
        .nav-links > *{ margin-right:0; margin-bottom:.4rem; }
        .nav-links > *:last-child{ margin-bottom:0; }
      }

      @media (max-width: 640px){
        .nav-cta > *{ margin-right:.4rem; margin-bottom:.4rem; }
      }
    }

    /* ---------- noscript ---------- */
    noscript{ display:block; background:#7f1d1d; color:#fff; padding:.8rem; text-align:center; }
